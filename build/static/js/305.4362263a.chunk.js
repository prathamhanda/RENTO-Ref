"use strict";(self.webpackChunkroomsonrent_frontend=self.webpackChunkroomsonrent_frontend||[]).push([[305],{2305:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(5043),r=t(5475),i=t(2171),l=t(9133),o=t(5336),n=t(2746),c=t(4955),d=t(6213),m=t(579);const x=()=>{const{getUserFavorites:e,toggleFavorite:s,loading:t}=(0,i.i)(),{user:x}=(0,l.As)(),[h,g]=(0,a.useState)([]),[u,f]=(0,a.useState)(!0),[v,p]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{const e=await d.A.get("/api/favorites");g(e.data)}catch(v){console.error("Error fetching favorites:",v)}finally{f(!1)}})()}),[]);return u||t?(0,m.jsx)(o.A,{children:(0,m.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,m.jsx)(n.A,{size:"large",color:"indigo"})})}):(0,m.jsx)(o.A,{children:(0,m.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Favorites"}),(0,m.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"View and manage your saved PG accommodations"})]}),v&&(0,m.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-md",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,m.jsx)("div",{className:"ml-3",children:(0,m.jsx)("p",{className:"text-sm text-red-700",children:v})})]})}),0===h.length?(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,m.jsx)("img",{src:"/images/no-favorites.svg",alt:"No favorites",className:"w-48 h-48 mx-auto opacity-50"}),(0,m.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No favorites yet"}),(0,m.jsx)("p",{className:"mt-1 text-gray-500",children:"You haven't saved any PG accommodations to your favorites list."}),(0,m.jsx)("div",{className:"mt-6",children:(0,m.jsx)(r.N_,{to:"/search",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FE6F61] hover:bg-[#e55a4d] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FE6F61]",children:"Browse Listings"})})]}):(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((e=>(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsx)("button",{onClick:()=>(async e=>{try{await s(e),g(h.filter((s=>s._id!==e)))}catch(t){console.error("Error removing favorite:",t),p("Failed to remove from favorites. Please try again.")}})(e._id),className:"absolute right-4 top-4 z-10 bg-white rounded-full p-1.5 shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FE6F61]",title:"Remove from favorites",children:(0,m.jsx)("svg",{className:"h-5 w-5 text-[#FE6F61]",fill:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,m.jsx)(c.A,{listing:e})]},e._id)))})]})})})}},4955:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(5475),r=t(2171),i=t(9133),l=t(5043),o=t(579);const n=e=>{let{listing:s}=e;const{toggleFavorite:t}=(0,r.i)(),{user:n}=(0,i.As)(),[c,d]=(0,l.useState)(!(!n||!s.favorites)&&s.favorites.includes(n._id)),[m,x]=(0,l.useState)(!1);return(0,o.jsx)(a.N_,{to:`/listings/${s._id}`,className:"block",children:(0,o.jsxs)("div",{className:"bg-white overflow-hidden rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("img",{src:s.images[0]||"/images/placeholder.jpg",alt:s.title,className:"w-full h-48 object-cover"}),(0,o.jsx)("button",{onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),n){x(!0);try{await t(s._id),d(!c)}catch(a){console.error("Error toggling favorite:",a)}finally{x(!1)}}else window.location.href=`/login?redirect=/listings/${s._id}`},disabled:m,className:"absolute top-2 right-2 p-1.5 bg-white rounded-full shadow-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:c?"#FE6F61":"none",stroke:c?"none":"currentColor",className:"w-5 h-5 text-gray-600",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,o.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,o.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-md bg-white shadow-sm",children:s.type.charAt(0).toUpperCase()+s.type.slice(1)})})]}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:s.title}),(0,o.jsx)("p",{className:"font-semibold text-[#FE6F61]",children:(h=s.price,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(h))})]}),(0,o.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[s.location.name,", ",s.location.city]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.amenities.slice(0,3).map(((e,s)=>(0,o.jsx)("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs text-gray-700",children:e},s))),s.amenities.length>3&&(0,o.jsxs)("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs text-gray-700",children:["+",s.amenities.length-3," more"]})]})]})]})});var h}}}]);
//# sourceMappingURL=305.4362263a.chunk.js.map