{"version":3,"file":"static/js/305.4362263a.chunk.js","mappings":"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","sources":["pages/UserFavorites.jsx","components/listings/ListingCard.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useListing } from '../context/ListingContext';\nimport { useAuth } from '../context/AuthContext';\nimport MainLayout from '../layouts/MainLayout';\nimport Spinner from '../components/common/Spinner';\nimport ListingCard from '../components/listings/ListingCard';\nimport axios from 'axios';\n\nconst UserFavorites = () => {\n  const { getUserFavorites, toggleFavorite, loading } = useListing();\n  const { user } = useAuth();\n  \n  const [favorites, setFavorites] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  useEffect(() => {\n    const fetchFavorites = async () => {\n      try {\n        const response = await axios.get('/api/favorites');\n        setFavorites(response.data);\n      } catch (error) {\n        console.error('Error fetching favorites:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    fetchFavorites();\n  }, []);\n  \n  const handleRemoveFavorite = async (listingId) => {\n    try {\n      await toggleFavorite(listingId);\n      // Remove from favorites list\n      setFavorites(favorites.filter(listing => listing._id !== listingId));\n    } catch (err) {\n      console.error('Error removing favorite:', err);\n      setError('Failed to remove from favorites. Please try again.');\n    }\n  };\n  \n  if (isLoading || loading) {\n    return (\n      <MainLayout>\n        <div className=\"flex justify-center items-center min-h-screen\">\n          <Spinner size=\"large\" color=\"indigo\" />\n        </div>\n      </MainLayout>\n    );\n  }\n  \n  return (\n    <MainLayout>\n      <div className=\"bg-gray-50 min-h-screen py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">My Favorites</h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              View and manage your saved PG accommodations\n            </p>\n          </div>\n          \n          {error && (\n            <div className=\"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-md\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {favorites.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow p-6 text-center\">\n              <img \n                src=\"/images/no-favorites.svg\" \n                alt=\"No favorites\" \n                className=\"w-48 h-48 mx-auto opacity-50\"\n              />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No favorites yet</h3>\n              <p className=\"mt-1 text-gray-500\">\n                You haven't saved any PG accommodations to your favorites list.\n              </p>\n              <div className=\"mt-6\">\n                <Link\n                  to=\"/search\"\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FE6F61] hover:bg-[#e55a4d] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FE6F61]\"\n                >\n                  Browse Listings\n                </Link>\n              </div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {favorites.map(listing => (\n                <div key={listing._id} className=\"relative group\">\n                  <button\n                    onClick={() => handleRemoveFavorite(listing._id)}\n                    className=\"absolute right-4 top-4 z-10 bg-white rounded-full p-1.5 shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FE6F61]\"\n                    title=\"Remove from favorites\"\n                  >\n                    <svg className=\"h-5 w-5 text-[#FE6F61]\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n                    </svg>\n                  </button>\n                  <ListingCard listing={listing} />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </MainLayout>\n  );\n};\n\nexport default UserFavorites; ","import { Link } from 'react-router-dom';\nimport { useListing } from '../../context/ListingContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useState } from 'react';\n\nconst ListingCard = ({ listing }) => {\n  const { toggleFavorite } = useListing();\n  const { user } = useAuth();\n  const [isFavorited, setIsFavorited] = useState(\n    user && listing.favorites ? listing.favorites.includes(user._id) : false\n  );\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Format currency for display\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      maximumFractionDigits: 0\n    }).format(price);\n  };\n  \n  const handleToggleFavorite = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!user) {\n      window.location.href = `/login?redirect=/listings/${listing._id}`;\n      return;\n    }\n    \n    setIsProcessing(true);\n    try {\n      await toggleFavorite(listing._id);\n      setIsFavorited(!isFavorited);\n    } catch (err) {\n      console.error('Error toggling favorite:', err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <Link to={`/listings/${listing._id}`} className=\"block\">\n      <div className=\"bg-white overflow-hidden rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300\">\n        <div className=\"relative\">\n          <img\n            src={listing.images[0] || '/images/placeholder.jpg'}\n            alt={listing.title}\n            className=\"w-full h-48 object-cover\"\n          />\n          <button\n            onClick={handleToggleFavorite}\n            disabled={isProcessing}\n            className=\"absolute top-2 right-2 p-1.5 bg-white rounded-full shadow-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill={isFavorited ? \"#FE6F61\" : \"none\"}\n              stroke={isFavorited ? \"none\" : \"currentColor\"}\n              className=\"w-5 h-5 text-gray-600\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n              />\n            </svg>\n          </button>\n          <div className=\"absolute bottom-2 left-2\">\n            <span className=\"inline-block px-2 py-1 text-xs font-semibold rounded-md bg-white shadow-sm\">\n              {listing.type.charAt(0).toUpperCase() + listing.type.slice(1)}\n            </span>\n          </div>\n        </div>\n        \n        <div className=\"p-4\">\n          <div className=\"flex justify-between mb-1\">\n            <h3 className=\"text-lg font-medium text-gray-900 truncate\">{listing.title}</h3>\n            <p className=\"font-semibold text-[#FE6F61]\">{formatPrice(listing.price)}</p>\n          </div>\n          <p className=\"text-sm text-gray-500 mb-2\">{listing.location.name}, {listing.location.city}</p>\n          \n          <div className=\"flex flex-wrap gap-2 mt-3\">\n            {listing.amenities.slice(0, 3).map((amenity, index) => (\n              <span \n                key={index}\n                className=\"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs text-gray-700\"\n              >\n                {amenity}\n              </span>\n            ))}\n            {listing.amenities.length > 3 && (\n              <span className=\"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs text-gray-700\">\n                +{listing.amenities.length - 3} more\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default ListingCard; "],"names":["UserFavorites","getUserFavorites","toggleFavorite","loading","useListing","user","useAuth","favorites","setFavorites","useState","isLoading","setIsLoading","error","setError","useEffect","async","response","axios","get","data","console","fetchFavorites","_jsx","MainLayout","children","className","Spinner","size","color","_jsxs","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","length","src","alt","Link","to","map","listing","onClick","listingId","filter","_id","err","handleRemoveFavorite","title","ListingCard","_ref","isFavorited","setIsFavorited","includes","isProcessing","setIsProcessing","images","e","preventDefault","stopPropagation","window","location","href","disabled","xmlns","type","charAt","toUpperCase","slice","price","Intl","NumberFormat","style","currency","maximumFractionDigits","format","name","city","amenities","amenity","index"],"sourceRoot":""}