"use strict";(self.webpackChunkroomsonrent_frontend=self.webpackChunkroomsonrent_frontend||[]).push([[912],{8912:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(5043),n=s(5475),i=s(6213),l=s(579);const d=()=>{const[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)(!0),[r,c]=(0,a.useState)(""),[o,x]=(0,a.useState)("all");(0,a.useEffect)((()=>{(async()=>{try{const e=await i.A.get("/api/owner/bookings");t(e.data)}catch(r){var e,s;c((null===(e=r.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to fetch bookings")}finally{d(!1)}})()}),[]);const p=async(s,a)=>{try{await i.A.patch(`/api/bookings/${s}/status`,{status:a}),t(e.map((e=>e._id===s?{...e,status:a}:e)))}catch(r){var n,l;c((null===(n=r.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||"Failed to update booking status")}},h=e.filter((e=>"all"===o||e.status===o));return s?(0,l.jsx)("div",{children:"Loading..."}):(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Bookings"}),r&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:r}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"border rounded-lg px-4 py-2",children:[(0,l.jsx)("option",{value:"all",children:"All Bookings"}),(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,l.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),0===h.length?(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("p",{className:"text-gray-600",children:"No bookings found."})}):(0,l.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-in"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)(n.N_,{to:`/listings/${e.listing._id}`,className:"text-blue-600 hover:text-blue-800",children:e.listing.title})}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.user.name,(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.user.email})]}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.checkInDate).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full \n                      "+("confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"pending"===e.status&&(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)("button",{onClick:()=>p(e._id,"confirmed"),className:"text-green-600 hover:text-green-800",children:"Confirm"}),(0,l.jsx)("button",{onClick:()=>p(e._id,"cancelled"),className:"text-red-600 hover:text-red-800",children:"Cancel"})]})})]},e._id)))})]})})]})}}}]);
//# sourceMappingURL=912.3a7b0f8e.chunk.js.map